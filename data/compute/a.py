compute_datas = {'servers': [{'OS-EXT-STS:task_state': None, 'addresses': {'selfservice': [{'OS-EXT-IPS-MAC:mac_addr': 'fa:16:3e:d4:05:d2', 'version': 4, 'addr': '10.0.4.16', 'OS-EXT-IPS:type': 'fixed'}]}, 'links': [{'href': 'http://192.168.4.202:8774/v2.1/servers/2f6833ba-5605-4fe5-910f-bf4aa3fcf085', 'rel': 'self'}, {'href': 'http://192.168.4.202:8774/servers/2f6833ba-5605-4fe5-910f-bf4aa3fcf085', 'rel': 'bookmark'}], 'image': {'id': 'b24add44-01c4-4a1b-8afd-1b1d6fb22baf', 'links': [{'href': 'http://192.168.4.202:8774/images/b24add44-01c4-4a1b-8afd-1b1d6fb22baf', 'rel': 'bookmark'}]}, 'OS-EXT-STS:vm_state': 'active', 'OS-EXT-SRV-ATTR:instance_name': 'instance-00000007', 'OS-SRV-USG:launched_at': '2020-01-22T11:44:35.000000', 'flavor': {'id': '0', 'links': [{'href': 'http://192.168.4.202:8774/flavors/0', 'rel': 'bookmark'}]}, 'id': '2f6833ba-5605-4fe5-910f-bf4aa3fcf085', 'security_groups': [{'name': 'default'}, {'name': 'default'}], 'user_id': '231fd58cd1c648068816b1c28e80e8b9', 'OS-DCF:diskConfig': 'MANUAL', 'accessIPv4': '', 'accessIPv6': '', 'progress': 0, 'OS-EXT-STS:power_state': 1, 'OS-EXT-AZ:availability_zone': 'nova', 'config_drive': '', 'status': 'ACTIVE', 'updated': '2020-01-22T12:06:47Z', 'hostId': 'f0f8887047b9a397a21f436efae3b215a215911c8a873411213c1900', 'OS-EXT-SRV-ATTR:host': 'compute', 'OS-SRV-USG:terminated_at': None, 'key_name': 'mykey', 'OS-EXT-SRV-ATTR:hypervisor_hostname': 'compute', 'name': 'basic213', 'created': '2020-01-22T11:44:19Z', 'tenant_id': '98a9a18caa1f48fe871e325304ac38b5', 'os-extended-volumes:volumes_attached': [], 'metadata': {}}, {'OS-EXT-STS:task_state': None, 'addresses': {'provider': [{'OS-EXT-IPS-MAC:mac_addr': 'fa:16:3e:77:aa:19', 'version': 4, 'addr': '10.0.2.36', 'OS-EXT-IPS:type': 'fixed'}]}, 'links': [{'href': 'http://192.168.4.202:8774/v2.1/servers/d0e66390-624b-4e4a-b161-b2b929eb5012', 'rel': 'self'}, {'href': 'http://192.168.4.202:8774/servers/d0e66390-624b-4e4a-b161-b2b929eb5012', 'rel': 'bookmark'}], 'image': {'id': 'b24add44-01c4-4a1b-8afd-1b1d6fb22baf', 'links': [{'href': 'http://192.168.4.202:8774/images/b24add44-01c4-4a1b-8afd-1b1d6fb22baf', 'rel': 'bookmark'}]}, 'OS-EXT-STS:vm_state': 'active', 'OS-EXT-SRV-ATTR:instance_name': 'instance-00000002', 'OS-SRV-USG:launched_at': '2019-09-30T19:28:54.000000', 'flavor': {'id': '0', 'links': [{'href': 'http://192.168.4.202:8774/flavors/0', 'rel': 'bookmark'}]}, 'id': 'd0e66390-624b-4e4a-b161-b2b929eb5012', 'security_groups': [{'name': 'default'}], 'user_id': '231fd58cd1c648068816b1c28e80e8b9', 'OS-DCF:diskConfig': 'AUTO', 'accessIPv4': '', 'accessIPv6': '', 'progress': 0, 'OS-EXT-STS:power_state': 0, 'OS-EXT-AZ:availability_zone': 'nova', 'config_drive': '', 'status': 'ACTIVE', 'updated': '2019-09-30T19:49:33Z', 'hostId': 'f0f8887047b9a397a21f436efae3b215a215911c8a873411213c1900', 'OS-EXT-SRV-ATTR:host': 'compute', 'OS-SRV-USG:terminated_at': None, 'key_name': 'mykey', 'OS-EXT-SRV-ATTR:hypervisor_hostname': 'compute', 'name': 'cirros-pro', 'created': '2019-09-30T19:28:44Z', 'tenant_id': '98a9a18caa1f48fe871e325304ac38b5', 'os-extended-volumes:volumes_attached': [], 'metadata': {}}, {'OS-EXT-STS:task_state': None, 'addresses': {'selfservice': [{'OS-EXT-IPS-MAC:mac_addr': 'fa:16:3e:0b:44:b9', 'version': 4, 'addr': '10.0.4.3', 'OS-EXT-IPS:type': 'fixed'}]}, 'links': [{'href': 'http://192.168.4.202:8774/v2.1/servers/f3b75988-f0be-4f7c-84d1-f4a3a0a033bb', 'rel': 'self'}, {'href': 'http://192.168.4.202:8774/servers/f3b75988-f0be-4f7c-84d1-f4a3a0a033bb', 'rel': 'bookmark'}], 'image': {'id': 'b24add44-01c4-4a1b-8afd-1b1d6fb22baf', 'links': [{'href': 'http://192.168.4.202:8774/images/b24add44-01c4-4a1b-8afd-1b1d6fb22baf', 'rel': 'bookmark'}]}, 'OS-EXT-STS:vm_state': 'active', 'OS-EXT-SRV-ATTR:instance_name': 'instance-00000001', 'OS-SRV-USG:launched_at': '2019-09-30T15:13:34.000000', 'flavor': {'id': '0', 'links': [{'href': 'http://192.168.4.202:8774/flavors/0', 'rel': 'bookmark'}]}, 'id': 'f3b75988-f0be-4f7c-84d1-f4a3a0a033bb', 'security_groups': [{'name': 'default'}], 'user_id': '231fd58cd1c648068816b1c28e80e8b9', 'OS-DCF:diskConfig': 'AUTO', 'accessIPv4': '', 'accessIPv6': '', 'progress': 0, 'OS-EXT-STS:power_state': 0, 'OS-EXT-AZ:availability_zone': 'nova', 'config_drive': '', 'status': 'ACTIVE', 'updated': '2019-09-30T19:49:35Z', 'hostId': 'f0f8887047b9a397a21f436efae3b215a215911c8a873411213c1900', 'OS-EXT-SRV-ATTR:host': 'compute', 'OS-SRV-USG:terminated_at': None, 'key_name': 'mykey', 'OS-EXT-SRV-ATTR:hypervisor_hostname': 'compute', 'name': 'AA', 'created': '2019-09-30T15:13:26Z', 'tenant_id': '98a9a18caa1f48fe871e325304ac38b5', 'os-extended-volumes:volumes_attached': [], 'metadata': {}}]}

flavor_datas = {'flavors': [{'id': '0', 'links': [{'href': 'http://192.168.4.202:8774/v2.1/flavors/0', 'rel': 'self'}, {'href': 'http://192.168.4.202:8774/flavors/0', 'rel': 'bookmark'}], 'name': 'm1.small'}]}


terraform_data = [{
      "mode": "data",
      "type": "openstack_compute_instance_v2",
      "name": "basic",
      "provider": "provider.openstack",
      "instances": [{
          "status" : data['status'],
          "attributes" : {
              "id" : data['id'],
              "name" : data['name'],
              "network" : data['addresses'],
              "key_pair" : data['key_name'],
              "availability_zone" : data['OS-EXT-AZ:availability_zone'],
              "security_groups" : data['security_groups'],
              "block_device" : [],
              "flavor_id" : data['flavor'],
              "created" : data['created'],
          }
      }for data in compute_datas['servers']]
}]


print(terraform_data)

